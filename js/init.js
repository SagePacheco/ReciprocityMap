"use strict";function createMap(){var t=new ScaleRaphael("map",930,590),e={fill:"#d9d9d9",cursor:"pointer",stroke:strokeColor,"stroke-width":1,"stroke-linejoin":"round"},a=new Array;for(var s in usamappaths){var o=t.path(usamappaths[s].path);o.attr(e),a[o.id]=s,o.name=stateNames[o.id],controlStates[stateNames[o.id]]=o,"OFF"===stateModes[o.id]?o.attr({fill:offColor,cursor:"default"}):(o.attr({fill:stateColors[o.id]}),o.mouseover(function(){this!==current&&this.animate({fill:stateOverColors[this.id]},500);this.getBBox(0);$("#map").next(".point").remove(),$("#map").after($("<div />").addClass("point")),$(".point").html(stateNames[this.id]).css({left:mouseX-50,top:mouseY-70}).fadeIn()}),o.mouseout(function(){this.animate({fill:stateColors[this.id]},500),$("#map").next(".point").remove()}),o.mouseup(function(){var t=$("#text")[0];t.scrollLeft=0,t.scrollTop=0,current=this,"true"===useSideText&&$("#text").html(stateText[this.id]),controlFlow(this.name)}))}resizeMap(t)}function getMouseXY(t){var e=$(window).scrollTop();t&&t.pageX?(mouseX=t.pageX,mouseY=t.pageY-e):(mouseX=event.clientX+document.body.scrollLeft,mouseY=event.clientY+document.body.scrollTop),0>mouseX&&(mouseX=0),0>mouseY&&(mouseY=0),$("#map").next(".point").css({left:mouseX-50,top:mouseY-70})}function resizeMap(t){t.changeSize(mapWidth,mapHeight,!0,!1),"true"===useSideText?$(".mapWrapper").css({width:parseFloat(mapWidth,10)+parseFloat(textAreaWidth,10)+"px",height:mapHeight+"px"}):$(".mapWrapper").css({width:mapWidth+"px",height:mapHeight+"px"})}var stateNames=[],stateURLs=[],stateModes=[],stateColors=[],stateOverColors=[],stateClickedColors=[],stateText=[],offColor,strokeColor,mapWidth,mapHeight,useSideText,textAreaWidth,textAreaPadding,mouseX=0,mouseY=0,current=null,controlStates=[],IE=$.browser.msie?!0:!1;$.ajax({type:"GET",url:"xml/usaMapSettings.xml",dataType:$.browser.msie?"text":"xml",success:function(t){var e;$.browser.msie?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t)):e=t;var a=$(e);offColor="#"+a.find("mapSettings").attr("offColor"),strokeColor="#"+a.find("mapSettings").attr("strokeColor"),mapWidth=a.find("mapSettings").attr("mapWidth"),mapHeight=a.find("mapSettings").attr("mapHeight"),useSideText=a.find("mapSettings").attr("useSideText"),textAreaWidth=a.find("mapSettings").attr("textAreaWidth"),textAreaPadding=a.find("mapSettings").attr("textAreaPadding"),"true"===useSideText&&($("#text").css({width:parseFloat(textAreaWidth)-parseFloat(2*textAreaPadding)+"px",height:parseFloat(mapHeight)-parseFloat(2*textAreaPadding)+"px",display:"inline","float":"right",padding:textAreaPadding+"px"}),$("#text").html(a.find("defaultSideText").text())),a.find("stateData").each(function(){var t=$(this);stateText.push(t.text()),stateNames.push(t.attr("stateName")),stateURLs.push(t.attr("url")),stateModes.push(t.attr("stateMode")),stateColors.push("#"+t.attr("initialStateColor")),stateOverColors.push("#"+t.attr("stateOverColor")),stateClickedColors.push("#"+t.attr("stateSelectedColor"))}),createMap()}}),document.captureEvents&&Event.MOUSEMOVE&&document.captureEvents(Event.MOUSEMOVE),$(document).mousemove(function(t){getMouseXY(t)});